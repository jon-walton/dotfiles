if [[ -r "${XDG_CACHE_HOME:-$HOME/.cache}/p10k-instant-prompt-${(%):-%n}.zsh" ]]; then
  source "${XDG_CACHE_HOME:-$HOME/.cache}/p10k-instant-prompt-${(%):-%n}.zsh"
fi

export ZSH="$HOME/.oh-my-zsh"

DISABLE_AUTO_UPDATE="true"

ZSH_THEME="powerlevel10k/powerlevel10k"

plugins=(
	zsh-syntax-highlighting
	{{- if .iswork }}
	docker
	zsh-aws-vault
	{{- end }}
)

source $ZSH/oh-my-zsh.sh

#
# Aliases
#
alias cm=chezmoi
{{- if .iswork }}
alias tf=terraform
alias tg=terragrunt
{{- end }}

#
# Env
#
export HOMEBREW_CASK_OPTS="--appdir=~/Applications"
{{- if .iswork }}
export TF_PLUGIN_CACHE_DIR="$HOME/.terraform.d/plugin-cache"
{{- end }}

{{ if eq .chezmoi.os "darwin" -}}
{{   if stat "/opt/homebrew/bin/brew" -}}
fpath+=("$(/opt/homebrew/bin/brew --prefix)/share/zsh/site-functions")
eval "$(/opt/homebrew/bin/brew shellenv)"
{{   else if stat "/usr/local/bin/brew" -}}
fpath+=("$(/usr/local/bin/brew --prefix)/share/zsh/site-functions")
eval "$(/usr/local/bin/brew shellenv)"
{{   end -}}
{{ end -}}

{{- if .iswork }}

# To customize prompt, run `p10k configure` or edit ~/.p10k.zsh.
[[ ! -f ~/.p10k.zsh ]] || source ~/.p10k.zsh
